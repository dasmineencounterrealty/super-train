<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ghost Link Workstation</title>
    <style>
        body { background: #0f172a; color: #f8fafc; font-family: 'Segoe UI', sans-serif; padding: 30px; }
        .box { max-width: 700px; margin: auto; background: #1e293b; padding: 25px; border-radius: 12px; border: 1px solid #334155; }
        input, textarea { width: 100%; background: #020617; border: 1px solid #475569; color: #10b981; padding: 12px; border-radius: 6px; margin: 10px 0; box-sizing: border-box; font-family: monospace; }
        label { font-size: 12px; color: #94a3b8; text-transform: uppercase; font-weight: bold; }
        button { background: #3b82f6; color: white; border: none; padding: 15px; border-radius: 6px; cursor: pointer; width: 100%; font-weight: bold; margin-top: 10px; }
        .result-area { margin-top: 20px; padding: 15px; background: #020617; border-left: 4px solid #10b981; word-break: break-all; font-size: 13px; display: none; }
    </style>
</head>
<body>

<div class="box">
    <h2 style="color:#38bdf8; margin-top:0;">ðŸš‰ Fragment Link Generator</h2>
    
    <label>1. Your Gateway Domain (Base)</label>
    <input type="text" id="baseDomain" placeholder="https://yourdomain.com/#?id=" value="https://yourdomain.com/#?id=">

    <label>2. Destination URL (Target)</label>
    <input type="text" id="targetUrl" placeholder="https://your-github-or-worker-link.com/page">

    <button onclick="generateGhostLink()">GENERATE GHOST LINK</button>

    <div id="resultBox" class="result-area">
        <label style="color:#10b981">Generated Link:</label>
        <div id="finalLink" style="margin-top:10px; color:#f8fafc;"></div>
        <button onclick="copyLink()" style="background:#1e293b; border:1px solid #334155; padding:5px; margin-top:10px; font-size:11px;">Copy to Clipboard</button>
    </div>
</div>

<script>
    const secretKey = "S3cur3_G4t3w4y"; // MUST match the key in your index.html

    function generateGhostLink() {
        const base = document.getElementById('baseDomain').value;
        const target = document.getElementById('targetUrl').value;
        
        if (!target) return alert("Enter a target URL");

        // 1. Generate 15-char random salt
        const salt = Math.random().toString(36).substring(2, 17).padEnd(15, '0');

        // 2. XOR Encrypt the target URL
        let encrypted = "";
        for (let i = 0; i < target.length; i++) {
            encrypted += String.fromCharCode(target.charCodeAt(i) ^ secretKey.charCodeAt(i % secretKey.length));
        }

        // 3. Combine Salt + Encrypted and Base64 encode
        const combined = salt + encrypted;
        const b64 = btoa(combined).replace(/\+/g, '-').replace(/\//g, '_').replace(/=+$/, '');

        // 4. Final Output
        const finalUrl = base + b64;
        
        document.getElementById('finalLink').innerText = finalUrl;
        document.getElementById('resultBox').style.display = 'block';
    }

    function copyLink() {
        const text = document.getElementById('finalLink').innerText;
        navigator.clipboard.writeText(text);
        alert("Link copied!");
    }
</script>

</body>
</html>
